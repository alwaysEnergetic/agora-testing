{"version":3,"sources":["settings.js","Video.js","Controls.js","VideoCall.js","App.js","index.js"],"names":["config","mode","codec","appId","token","useClient","createClient","useMicrophoneAndCameraTracks","createMicrophoneAndCameraTracks","channelName","Video","props","users","tracks","useState","gridSpacing","setGridSpacing","useEffect","Math","max","floor","length","Grid","container","style","height","item","xs","videoTrack","width","map","user","uid","Controls","client","setStart","setInCall","video","audio","trackState","setTrackState","mute","type","a","setEnabled","ps","leaveChannel","leave","removeAllListeners","close","spacing","alignItems","Button","variant","color","onClick","VideoCall","setUsers","start","ready","init","name","on","mediaType","subscribe","prevUsers","audioTrack","play","stop","filter","User","join","console","log","connectionState","publish","error","direction","App","inCall","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9458e5d4.chunk.js","sourcesContent":["import { createClient, createMicrophoneAndCameraTracks } from \"agora-rtc-react\";\n\nconst appId = \"902b2e809ca54994ba1af501720d3c0f\";\nconst token =\n  \"006902b2e809ca54994ba1af501720d3c0fIACMQnjd3Mmto7F08fdn+kIOkO1sh1WR8GxyXXqdOV7yzWTNKL8AAAAAEAA8g5F5sImxYAEAAQCwibFg\";\n\nexport const config = { mode: \"rtc\", codec: \"vp8\", appId: appId, token: token };\nexport const useClient = createClient(config);\nexport const useMicrophoneAndCameraTracks = createMicrophoneAndCameraTracks();\nexport const channelName = \"main\";\n","import { AgoraVideoPlayer } from \"agora-rtc-react\";\nimport { Grid } from \"@material-ui/core\";\nimport { useState, useEffect } from \"react\";\n\nexport default function Video(props) {\n  const { users, tracks } = props;\n  const [gridSpacing, setGridSpacing] = useState(12);\n\n  useEffect(() => {\n    setGridSpacing(Math.max(Math.floor(12 / (users.length + 1)), 4));\n  }, [users, tracks]);\n\n  return (\n    <Grid container style={{ height: \"100%\" }}>\n      <Grid item xs={gridSpacing}>\n        <AgoraVideoPlayer\n          videoTrack={tracks[1]}\n          style={{ height: \"100%\", width: \"100%\" }}\n        />\n      </Grid>\n      {users.length > 0 &&\n        users.map((user) => {\n          if (user.videoTrack) {\n            return (\n              <Grid item xs={gridSpacing}>\n                <AgoraVideoPlayer\n                  videoTrack={user.videoTrack}\n                  key={user.uid}\n                  style={{ height: \"100%\", width: \"100%\" }}\n                />\n              </Grid>\n            );\n          } else return null;\n        })}\n    </Grid>\n  );\n}\n","import { useState } from \"react\";\nimport { useClient } from \"./settings\";\nimport { Grid, Button } from \"@material-ui/core\";\nimport MicIcon from \"@material-ui/icons/Mic\";\nimport MicOffIcon from \"@material-ui/icons/MicOff\";\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\nimport VideocamOffIcon from \"@material-ui/icons/VideocamOff\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\n\nexport default function Controls(props) {\n  const client = useClient();\n  const { tracks, setStart, setInCall } = props;\n  const [trackState, setTrackState] = useState({ video: true, audio: true });\n\n  const mute = async (type) => {\n    if (type === \"audio\") {\n      await tracks[0].setEnabled(!trackState.audio);\n      setTrackState((ps) => {\n        return { ...ps, audio: !ps.audio };\n      });\n    } else if (type === \"video\") {\n      await tracks[1].setEnabled(!trackState.video);\n      setTrackState((ps) => {\n        return { ...ps, video: !ps.video };\n      });\n    }\n  };\n\n  const leaveChannel = async () => {\n    await client.leave();\n    client.removeAllListeners();\n    tracks[0].close();\n    tracks[1].close();\n    setStart(false);\n    setInCall(false);\n  };\n\n  return (\n    <Grid container spacing={2} alignItems=\"center\">\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color={trackState.audio ? \"primary\" : \"secondary\"}\n          onClick={() => mute(\"audio\")}\n        >\n          {trackState.audio ? <MicIcon /> : <MicOffIcon />}\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color={trackState.video ? \"primary\" : \"secondary\"}\n          onClick={() => mute(\"video\")}\n        >\n          {trackState.video ? <VideocamIcon /> : <VideocamOffIcon />}\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color=\"default\"\n          onClick={() => leaveChannel()}\n        >\n          Leave\n          <ExitToAppIcon />\n        </Button>\n      </Grid>\n    </Grid>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport {\n  config,\n  useClient,\n  useMicrophoneAndCameraTracks,\n  channelName,\n} from \"./settings.js\";\nimport { Grid } from \"@material-ui/core\";\nimport Video from \"./Video\";\nimport Controls from \"./Controls\";\n\nexport default function VideoCall(props) {\n  const { setInCall } = props;\n  const [users, setUsers] = useState([]);\n  const [start, setStart] = useState(false);\n  const client = useClient();\n  const { ready, tracks } = useMicrophoneAndCameraTracks();\n\n  useEffect(() => {\n    let init = async (name) => {\n      client.on(\"user-published\", async (user, mediaType) => {\n        await client.subscribe(user, mediaType);\n        if (mediaType === \"video\") {\n          setUsers((prevUsers) => {\n            return [...prevUsers, user];\n          });\n        }\n        if (mediaType === \"audio\") {\n          user.audioTrack.play();\n        }\n      });\n\n      client.on(\"user-unpublished\", (user, mediaType) => {\n        if (mediaType === \"audio\") {\n          if (user.audioTrack) user.audioTrack.stop();\n        }\n        if (mediaType === \"video\") {\n          setUsers((prevUsers) => {\n            return prevUsers.filter((User) => User.uid !== user.uid);\n          });\n        }\n      });\n\n      client.on(\"user-left\", (user) => {\n        setUsers((prevUsers) => {\n          return prevUsers.filter((User) => User.uid !== user.uid);\n        });\n      });\n\n      try {\n        await client.join(config.appId, name, config.token, null);\n      } catch (error) {\n        console.log(\"error\");\n      }\n\n      if (tracks && client.connectionState === \"CONNECTED\")\n        await client.publish([tracks[0], tracks[1]]);\n      setStart(true);\n    };\n\n    if (ready && tracks) {\n      try {\n        init(channelName);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, [channelName, client, ready, tracks]);\n\n  return (\n    <Grid container direction=\"column\" style={{ height: \"100%\" }}>\n      <Grid item style={{ height: \"5%\" }}>\n        {ready && tracks && (\n          <Controls tracks={tracks} setStart={setStart} setInCall={setInCall} />\n        )}\n      </Grid>\n      <Grid item style={{ height: \"95%\" }}>\n        {start && tracks && <Video tracks={tracks} users={users} />}\n      </Grid>\n    </Grid>\n  );\n}\n","import { useState } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport VideoCall from \"./VideoCall\";\n\nfunction App() {\n  const [inCall, setInCall] = useState(false);\n\n  return (\n    <div className=\"App\" style={{ height: \"100%\" }}>\n      {inCall ? (\n        <VideoCall setInCall={setInCall} />\n      ) : (\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => setInCall(true)}\n        >\n          Join Call\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}